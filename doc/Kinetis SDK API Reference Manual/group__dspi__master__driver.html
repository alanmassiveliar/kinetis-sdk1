<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>Kinetis SDK API Reference Manual: DSPI Master Driver</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="fs_logo.gif"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Kinetis SDK API Reference Manual
   &#160;<span id="projectnumber">1.0.0</span>
   </div>
   <div id="projectbrief">Freescale Semiconductor, Inc.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Introduction</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>API&#160;Usage</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__dspi__master__driver.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a>  </div>
  <div class="headertitle">
<div class="title">DSPI Master Driver<div class="ingroups"><a class="el" href="group__dspi.html">Serial Peripheral Interface (DSPI)</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>This section describes the programming interface of the DSPI master mode Peripheral driver.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:structdspi__device__t"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__dspi__master__driver.html#structdspi__device__t">dspi_device_t</a></td></tr>
<tr class="memdesc:structdspi__device__t"><td class="mdescLeft">&#160;</td><td class="mdescRight">Data structure containing information about a device on the SPI bus.  <a href="group__dspi__master__driver.html#structdspi__device__t">More...</a><br/></td></tr>
<tr class="separator:structdspi__device__t"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:structdspi__master__state__t"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__dspi__master__driver.html#structdspi__master__state__t">dspi_master_state_t</a></td></tr>
<tr class="memdesc:structdspi__master__state__t"><td class="mdescLeft">&#160;</td><td class="mdescRight">Runtime state structure for the DSPI master driver.  <a href="group__dspi__master__driver.html#structdspi__master__state__t">More...</a><br/></td></tr>
<tr class="separator:structdspi__master__state__t"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:structdspi__master__user__config__t"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__dspi__master__driver.html#structdspi__master__user__config__t">dspi_master_user_config_t</a></td></tr>
<tr class="memdesc:structdspi__master__user__config__t"><td class="mdescLeft">&#160;</td><td class="mdescRight">The user configuration structure for the DSPI master driver.  <a href="group__dspi__master__driver.html#structdspi__master__user__config__t">More...</a><br/></td></tr>
<tr class="separator:structdspi__master__user__config__t"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="member-group"></a>
Initialization and shutdown</h2></td></tr>
<tr class="memitem:ga37d57c2ed98daaa6340d50054d617967"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__dspi__hal.html#ga34b3b8e88f67e380c7e5f50e2422774c">dspi_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__dspi__master__driver.html#ga37d57c2ed98daaa6340d50054d617967">DSPI_DRV_MasterInit</a> (uint32_t instance, <a class="el" href="group__dspi__master__driver.html#structdspi__master__state__t">dspi_master_state_t</a> *dspiState, const <a class="el" href="group__dspi__master__driver.html#structdspi__master__user__config__t">dspi_master_user_config_t</a> *userConfig)</td></tr>
<tr class="memdesc:ga37d57c2ed98daaa6340d50054d617967"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes a DSPI instance for master mode operation.  <a href="#ga37d57c2ed98daaa6340d50054d617967">More...</a><br/></td></tr>
<tr class="separator:ga37d57c2ed98daaa6340d50054d617967"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3b9dafbf84284f44385b4bc302ebcb84"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__dspi__hal.html#ga34b3b8e88f67e380c7e5f50e2422774c">dspi_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__dspi__master__driver.html#ga3b9dafbf84284f44385b4bc302ebcb84">DSPI_DRV_MasterInitDma</a> (uint32_t instance, <a class="el" href="group__dspi__master__driver.html#structdspi__master__state__t">dspi_master_state_t</a> *dspiState, const <a class="el" href="group__dspi__master__driver.html#structdspi__master__user__config__t">dspi_master_user_config_t</a> *userConfig, <a class="el" href="group__edma__hal.html#structedma__software__tcd__t">edma_software_tcd_t</a> *stcdSrc2CmdDataLast)</td></tr>
<tr class="memdesc:ga3b9dafbf84284f44385b4bc302ebcb84"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes a DSPI instance for master mode operation with DMA support.  <a href="#ga3b9dafbf84284f44385b4bc302ebcb84">More...</a><br/></td></tr>
<tr class="separator:ga3b9dafbf84284f44385b4bc302ebcb84"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf0acb74e62f52653da8b803b34d4b950"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__dspi__master__driver.html#gaf0acb74e62f52653da8b803b34d4b950">DSPI_DRV_MasterDeinit</a> (uint32_t instance)</td></tr>
<tr class="memdesc:gaf0acb74e62f52653da8b803b34d4b950"><td class="mdescLeft">&#160;</td><td class="mdescRight">Shuts down a DSPI instance.  <a href="#gaf0acb74e62f52653da8b803b34d4b950">More...</a><br/></td></tr>
<tr class="separator:gaf0acb74e62f52653da8b803b34d4b950"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga705cfda5272cff31714e7167eed5ca7c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__dspi__hal.html#ga34b3b8e88f67e380c7e5f50e2422774c">dspi_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__dspi__master__driver.html#ga705cfda5272cff31714e7167eed5ca7c">DSPI_DRV_MasterSetDelay</a> (uint32_t instance, <a class="el" href="group__dspi__hal.html#ga1ca2fbee37b3cb046c075a7e765d64ed">dspi_delay_type_t</a> whichDelay, uint32_t delayInNanoSec, uint32_t *calculatedDelay)</td></tr>
<tr class="memdesc:ga705cfda5272cff31714e7167eed5ca7c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Configures the DSPI master mode bus timing delay options.  <a href="#ga705cfda5272cff31714e7167eed5ca7c">More...</a><br/></td></tr>
<tr class="separator:ga705cfda5272cff31714e7167eed5ca7c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="member-group"></a>
Bus configuration</h2></td></tr>
<tr class="memitem:ga484ec4f6557a5f8aa3dffa4dfc7b3ba0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__dspi__hal.html#ga34b3b8e88f67e380c7e5f50e2422774c">dspi_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__dspi__master__driver.html#ga484ec4f6557a5f8aa3dffa4dfc7b3ba0">DSPI_DRV_MasterConfigureBus</a> (uint32_t instance, const <a class="el" href="group__dspi__master__driver.html#structdspi__device__t">dspi_device_t</a> *device, uint32_t *calculatedBaudRate)</td></tr>
<tr class="memdesc:ga484ec4f6557a5f8aa3dffa4dfc7b3ba0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Configures the DSPI port physical parameters to access a device on the bus.  <a href="#ga484ec4f6557a5f8aa3dffa4dfc7b3ba0">More...</a><br/></td></tr>
<tr class="separator:ga484ec4f6557a5f8aa3dffa4dfc7b3ba0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="member-group"></a>
Blocking transfers</h2></td></tr>
<tr class="memitem:ga3ad627b384f3552c44272b6a6fbdf3d2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__dspi__hal.html#ga34b3b8e88f67e380c7e5f50e2422774c">dspi_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__dspi__master__driver.html#ga3ad627b384f3552c44272b6a6fbdf3d2">DSPI_DRV_MasterTransferDataBlocking</a> (uint32_t instance, const <a class="el" href="group__dspi__master__driver.html#structdspi__device__t">dspi_device_t</a> *restrict device, const uint8_t *sendBuffer, uint8_t *receiveBuffer, size_t transferByteCount, uint32_t timeout)</td></tr>
<tr class="memdesc:ga3ad627b384f3552c44272b6a6fbdf3d2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Performs a blocking SPI master mode transfer.  <a href="#ga3ad627b384f3552c44272b6a6fbdf3d2">More...</a><br/></td></tr>
<tr class="separator:ga3ad627b384f3552c44272b6a6fbdf3d2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="member-group"></a>
Non-blocking transfers</h2></td></tr>
<tr class="memitem:gae17887e13923d6808d726da65407574b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__dspi__hal.html#ga34b3b8e88f67e380c7e5f50e2422774c">dspi_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__dspi__master__driver.html#gae17887e13923d6808d726da65407574b">DSPI_DRV_MasterTransferData</a> (uint32_t instance, const <a class="el" href="group__dspi__master__driver.html#structdspi__device__t">dspi_device_t</a> *restrict device, const uint8_t *sendBuffer, uint8_t *receiveBuffer, size_t transferByteCount)</td></tr>
<tr class="memdesc:gae17887e13923d6808d726da65407574b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Performs a non-blocking SPI master mode transfer.  <a href="#gae17887e13923d6808d726da65407574b">More...</a><br/></td></tr>
<tr class="separator:gae17887e13923d6808d726da65407574b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4c962f4f1d462d30d275c52f118d04c5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__dspi__hal.html#ga34b3b8e88f67e380c7e5f50e2422774c">dspi_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__dspi__master__driver.html#ga4c962f4f1d462d30d275c52f118d04c5">DSPI_DRV_MasterGetTransferStatus</a> (uint32_t instance, uint32_t *framesTransferred)</td></tr>
<tr class="memdesc:ga4c962f4f1d462d30d275c52f118d04c5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns whether the previous transfer is finished.  <a href="#ga4c962f4f1d462d30d275c52f118d04c5">More...</a><br/></td></tr>
<tr class="separator:ga4c962f4f1d462d30d275c52f118d04c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga08ca2ffc48f8a7fe72694571e067b5a1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__dspi__hal.html#ga34b3b8e88f67e380c7e5f50e2422774c">dspi_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__dspi__master__driver.html#ga08ca2ffc48f8a7fe72694571e067b5a1">DSPI_DRV_MasterAbortTransfer</a> (uint32_t instance)</td></tr>
<tr class="memdesc:ga08ca2ffc48f8a7fe72694571e067b5a1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Terminates an asynchronous transfer early.  <a href="#ga08ca2ffc48f8a7fe72694571e067b5a1">More...</a><br/></td></tr>
<tr class="separator:ga08ca2ffc48f8a7fe72694571e067b5a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>


<h3><a class="anchor" id="dspimaster"></a>DSPI Master Driver</h3><div class="textblock">Baud rate in bits per second.*/ <a class="el" href="group__dspi__hal.html#structdspi__data__format__config__t" title="DSPI data format settings configuration structure. ">dspi_data_format_config_t</a> dataBusConfig; /* data format config struct*/ } <a class="el" href="group__dspi__master__driver.html#structdspi__device__t" title="Data structure containing information about a device on the SPI bus. ">dspi_device_t</a>;<h1>Overview</h1>
The DSPI master mode peripheral driver transfers data to and from external devices on the DSPI bus in master mode. It supports transferring buffers of data with a single function call.<h1>Run-time state structures</h1>
The DSPI master driver uses a run-time state structure, <a class="el" href="group__dspi__master__driver.html#structdspi__master__state__t" title="Runtime state structure for the DSPI master driver. ">dspi_master_state_t</a>, to track the ongoing data transfer. The structure holds data that the DSPI master peripheral driver uses to communicate between the transfer function and the interrupt handler. The interrupt handler also uses this information to keep track of its progress. The user is only responsible to pass the memory for this run-time state structure and the DSPI master driver fills out the members.<h1>User configuration structures</h1>
The DSPI master driver uses instances of the user configuration structure, <a class="el" href="group__dspi__master__driver.html#structdspi__master__user__config__t" title="The user configuration structure for the DSPI master driver. ">dspi_master_user_config_t</a>, for the DSPI master driver. For this reason, the user can configure the most common settings of the DSPI peripheral with a single function call.<h1>Device structures</h1>
The DSPI master driver uses instances of the <a class="el" href="group__dspi__master__driver.html#structdspi__device__t" title="Data structure containing information about a device on the SPI bus. ">dspi_device_t</a> structure to represent the SPI bus configuration required to communicate to an external device that is connected to the bus.The device structure can be passed to the data transfer functions, and the bus is reconfigured before the transfer is started. Alternatively, the user can configure the SPI bus for a device manually. For instance, if there is only one device connected to the bus, the user might configure it only once.<h1>Initialization</h1>
To initialize the DSPI master driver, call the <a class="el" href="group__dspi__master__driver.html#ga37d57c2ed98daaa6340d50054d617967" title="Initializes a DSPI instance for master mode operation. ">DSPI_DRV_MasterInit()</a> function and and pass the instance number of the DSPI peripheral, the user configuration, <a class="el" href="group__dspi__master__driver.html#structdspi__master__user__config__t" title="The user configuration structure for the DSPI master driver. ">dspi_master_user_config_t</a>, a pointer to the variable for retrieving the calculated baud rate (this can be a NULL), and memory allocation for the run-time state structure used by the master driver to keep track of data transfers. Following the DSPI master initialization is the DSPI master configure bus. While the <a class="el" href="group__dspi__master__driver.html#ga37d57c2ed98daaa6340d50054d617967" title="Initializes a DSPI instance for master mode operation. ">DSPI_DRV_MasterInit()</a> function initializes the DSPI peripheral, the <a class="el" href="group__dspi__master__driver.html#ga484ec4f6557a5f8aa3dffa4dfc7b3ba0" title="Configures the DSPI port physical parameters to access a device on the bus. ">DSPI_DRV_MasterConfigureBus()</a> function configures the SPI bus parameters such as bits/frame, clock characteristics, data shift direction, baud rate, and desired chip select. More details to follow. For example, to use the DSPI1, pass a value of 1 to the initialization function. This is an example for the other parameters.Example code to initialize and configure the driver: </p>
<div class="fragment"><div class="line"><span class="comment">/* Set up and init the master  */</span></div>
<div class="line">uint32_t masterInstance = 1;</div>
<div class="line"><a class="code" href="group__dspi__master__driver.html#structdspi__master__state__t">dspi_master_state_t</a> dspiMasterState;</div>
<div class="line">uint32_t calculatedBaudRate;</div>
<div class="line"></div>
<div class="line"><span class="comment">/* configure the members of the user config */</span></div>
<div class="line"><a class="code" href="group__dspi__master__driver.html#structdspi__master__user__config__t">dspi_master_user_config_t</a> userConfig;</div>
<div class="line">userConfig.<a class="code" href="group__dspi__master__driver.html#ada9c810904ee8e24abefb25b9045c125">isChipSelectContinuous</a> = <span class="keyword">false</span>;</div>
<div class="line">userConfig.<a class="code" href="group__dspi__master__driver.html#a6c46d04d4031ebb56a12c665a0d17aaa">isSckContinuous</a> = <span class="keyword">false</span>;</div>
<div class="line">userConfig.<a class="code" href="group__dspi__master__driver.html#aa8b1f2458668337b90a340a4ecaf4aa4">pcsPolarity</a> = <a class="code" href="group__dspi__hal.html#ggab466e73cb54b2c023459d43918c4197daf89a174f7da2c2d1dd94eaee5f451ac7">kDspiPcs_ActiveLow</a>;</div>
<div class="line">userConfig.<a class="code" href="group__dspi__master__driver.html#a8514df82b4b4c68f4de58a3ed160faf1">whichCtar</a> = <a class="code" href="group__dspi__hal.html#gga992d5562af4cf4c45371feb8c5c1a1bfa21d94da5d7c4e6134907fad358147b35">kDspiCtar0</a>;</div>
<div class="line">userConfig.<a class="code" href="group__dspi__master__driver.html#a6433c1800d2a85da45ae347022c3cd9b">whichPcs</a> = <a class="code" href="group__dspi__hal.html#gga3d9d9a8fe16a51e6c697a547ab65bef1aae6b37fc82d8d2b7425b85dd63172acf">kDspiPcs1</a>;</div>
<div class="line"></div>
<div class="line"><span class="comment">/* init the DSPI module */</span></div>
<div class="line"><a class="code" href="group__dspi__master__driver.html#ga37d57c2ed98daaa6340d50054d617967">DSPI_DRV_MasterInit</a>(masterInstance, &amp;dspiMasterState, &amp;userConfig, &amp;calculatedBaudRate);</div>
<div class="line"></div>
<div class="line"><span class="comment">// Define bus configuration.</span></div>
<div class="line"><a class="code" href="group__dspi__master__driver.html#structdspi__device__t">dspi_device_t</a> spiDevice;</div>
<div class="line">spiDevice.dataBusConfig.<a class="code" href="group__dspi__hal.html#a99d8d0dec68d5d2c1de35f8bb8b66a75">bitsPerFrame</a> = 16;</div>
<div class="line">spiDevice.dataBusConfig.<a class="code" href="group__dspi__hal.html#ad751cbe15bfe01f02088e2a36059774a">clkPhase</a> = <a class="code" href="group__dspi__hal.html#gga4269ec144334dd60666a92e6fd2c1476ada723d5970a0b0a28d96a0e707cabd9c">kDspiClockPhase_FirstEdge</a>;</div>
<div class="line">spiDevice.dataBusConfig.<a class="code" href="group__dspi__hal.html#a8926c27980536d08b063f984cc5dc751">clkPolarity</a> = <a class="code" href="group__dspi__hal.html#gga1e0a9074742794ef89f597d220296651afffdb6de18c3b46c509c406ac7230586">kDspiClockPolarity_ActiveHigh</a>;</div>
<div class="line">spiDevice.dataBusConfig.<a class="code" href="group__dspi__hal.html#a7b5fc2246586c461ebd0325bba2e3113">direction</a> = <a class="code" href="group__dspi__hal.html#gga06fad8ae17b680f6dddfd798c9d3b30daed75ebb641f649ff0c4eb77d2624bcf2">kDspiMsbFirst</a>;</div>
<div class="line">spiDevice.<a class="code" href="group__dspi__master__driver.html#ac497d381e4bb407f8968ad34c47e7abd">bitsPerSec</a> = 500000;</div>
<div class="line"></div>
<div class="line"><span class="comment">/* configure the SPI bus */</span></div>
<div class="line"><a class="code" href="group__dspi__master__driver.html#ga484ec4f6557a5f8aa3dffa4dfc7b3ba0">DSPI_DRV_MasterConfigureBus</a>(masterInstance, &amp;spiDevice, &amp;calculatedBaudRate);</div>
</div><!-- fragment -->Additionally, the DSPI supports DMA transfers, but only for DSPI instance 0. To use the DSPI with DMA, call an alternate initialization function, DSPI_DRV_MasterInitDma. The user still needs to also call the <a class="el" href="group__dspi__master__driver.html#ga484ec4f6557a5f8aa3dffa4dfc7b3ba0" title="Configures the DSPI port physical parameters to access a device on the bus. ">DSPI_DRV_MasterConfigureBus()</a> function. </p>
<div class="fragment"><div class="line"><span class="comment">/* Function prototype */</span></div>
<div class="line"><a class="code" href="group__dspi__hal.html#ga34b3b8e88f67e380c7e5f50e2422774c">dspi_status_t</a> <a class="code" href="group__dspi__master__driver.html#ga3b9dafbf84284f44385b4bc302ebcb84">DSPI_DRV_MasterInitDma</a>(uint32_t instance,</div>
<div class="line">                                   <a class="code" href="group__dspi__master__driver.html#structdspi__master__state__t">dspi_master_state_t</a> * dspiState,</div>
<div class="line">                                   <span class="keyword">const</span> <a class="code" href="group__dspi__master__driver.html#structdspi__master__user__config__t">dspi_master_user_config_t</a> * userConfig,</div>
<div class="line">                                   <a class="code" href="group__edma__hal.html#structedma__software__tcd__t">edma_software_tcd_t</a> * stcdSrc2CmdDataLast);</div>
</div><!-- fragment -->This function requires one additional parameter, stcdSrc2CmdDataLast, a pointer to a structure of the type <a class="el" href="group__edma__hal.html#structedma__software__tcd__t" title="eDMA TCD ">edma_software_tcd_t</a>. This pointer needs to aligned to a 32-byte boundary.In addition to initialization of the DSPI interface, it is also necessary to configure the SPI to match the parameters needed by the peripheral device as mentioned above.<div class="fragment"><div class="line"><a class="code" href="group__dspi__hal.html#ga34b3b8e88f67e380c7e5f50e2422774c">dspi_status_t</a> <a class="code" href="group__dspi__master__driver.html#ga484ec4f6557a5f8aa3dffa4dfc7b3ba0">DSPI_DRV_MasterConfigureBus</a>(uint32_t instance</div>
<div class="line">                                          <span class="keyword">const</span> <a class="code" href="group__dspi__master__driver.html#structdspi__device__t">dspi_device_t</a> * device,</div>
<div class="line">                                          uint32_t * calculatedBaudRate);</div>
</div><!-- fragment -->The user passes in a device structure that represents the characteristics of the SPI bus including the desired baud rate. Note that, in some cases, the exact baud rate cannot be achieved. Instead, the closest matching baud rate is returned via the calculatedBaudRate parameter. Note that this parameter never exceeds the desired baud rate. An example device structure usage is as follows:<div class="fragment"><div class="line"><span class="keyword">typedef</span> <span class="keyword">struct </span>DSPIDevice {</div>
<div class="line">    uint32_t bitsPerSec;                 </div>
<div class="line">    <a class="code" href="group__dspi__hal.html#ga1e0a9074742794ef89f597d220296651">dspi_clock_polarity_t</a> clkPolarity;   </div>
<div class="line">    <a class="code" href="group__dspi__hal.html#ga4269ec144334dd60666a92e6fd2c1476">dspi_clock_phase_t</a> clkPhase;     </div>
<div class="line">    <a class="code" href="group__dspi__hal.html#ga06fad8ae17b680f6dddfd798c9d3b30d">dspi_shift_direction_t</a> direction; </div>
<div class="line">} <a class="code" href="group__dspi__hal.html#structdspi__data__format__config__t">dspi_data_format_config_t</a>;</div>
<div class="line"></div>
<div class="line">    <span class="comment">/* example usage */</span></div>
<div class="line">    <a class="code" href="group__dspi__master__driver.html#structdspi__device__t">dspi_device_t</a> spiDevice;</div>
<div class="line">    spiDevice.dataBusConfig.<a class="code" href="group__dspi__hal.html#a99d8d0dec68d5d2c1de35f8bb8b66a75">bitsPerFrame</a> = bitCount;</div>
<div class="line">    spiDevice.dataBusConfig.<a class="code" href="group__dspi__hal.html#ad751cbe15bfe01f02088e2a36059774a">clkPhase</a> = <a class="code" href="group__dspi__hal.html#gga4269ec144334dd60666a92e6fd2c1476ada723d5970a0b0a28d96a0e707cabd9c">kDspiClockPhase_FirstEdge</a>;</div>
<div class="line">    spiDevice.dataBusConfig.<a class="code" href="group__dspi__hal.html#a8926c27980536d08b063f984cc5dc751">clkPolarity</a> = <a class="code" href="group__dspi__hal.html#gga1e0a9074742794ef89f597d220296651afffdb6de18c3b46c509c406ac7230586">kDspiClockPolarity_ActiveHigh</a>;</div>
<div class="line">    spiDevice.dataBusConfig.<a class="code" href="group__dspi__hal.html#a7b5fc2246586c461ebd0325bba2e3113">direction</a> = <a class="code" href="group__dspi__hal.html#gga06fad8ae17b680f6dddfd798c9d3b30daed75ebb641f649ff0c4eb77d2624bcf2">kDspiMsbFirst</a>;</div>
<div class="line">    spiDevice.<a class="code" href="group__dspi__master__driver.html#ac497d381e4bb407f8968ad34c47e7abd">bitsPerSec</a> = baudRate;</div>
</div><!-- fragment --><h1>Transfers</h1>
The driver supports two different modes for transferring data: blocking and non-blocking (async). The <a class="el" href="group__dspi__master__driver.html#ga3ad627b384f3552c44272b6a6fbdf3d2" title="Performs a blocking SPI master mode transfer. ">DSPI_DRV_MasterTransferDataBlocking()</a> is the blocking transfer function. The <a class="el" href="group__dspi__master__driver.html#gae17887e13923d6808d726da65407574b" title="Performs a non-blocking SPI master mode transfer. ">DSPI_DRV_MasterTransferData()</a> is a non-blocking function.Example of a blocking transfer: </p>
<div class="fragment"><div class="line"><span class="comment">/* Function prototype */</span></div>
<div class="line">status_t <a class="code" href="group__dspi__master__driver.html#ga3ad627b384f3552c44272b6a6fbdf3d2">DSPI_DRV_MasterTransferDataBlocking</a>(masterInstance,</div>
<div class="line">                              <span class="keyword">const</span> <a class="code" href="group__dspi__master__driver.html#structdspi__device__t">dspi_device_t</a> * restrict device,</div>
<div class="line">                              <span class="keyword">const</span> uint8_t * sendBuffer,</div>
<div class="line">                              uint8_t * receiveBuffer,</div>
<div class="line">                              uint32_t transferByteCount,</div>
<div class="line">                              uint32_t timeout);</div>
<div class="line"></div>
<div class="line"><span class="comment">/* Example function call */</span></div>
<div class="line"><a class="code" href="group__dspi__master__driver.html#ga3ad627b384f3552c44272b6a6fbdf3d2">DSPI_DRV_MasterTransferDataBlocking</a>(masterInstance, NULL, s_dspiSourceBuffer[masterInstance], s_dspiSinkBuffer[masterInstance], 32, 1);</div>
</div><!-- fragment -->Example of a non-blocking transfer: </p>
<div class="fragment"><div class="line"><span class="comment">/* Function prototype */</span></div>
<div class="line">status_t <a class="code" href="group__dspi__master__driver.html#gae17887e13923d6808d726da65407574b">DSPI_DRV_MasterTransferData</a>(masterInstance,</div>
<div class="line">                                    <span class="keyword">const</span> <a class="code" href="group__dspi__master__driver.html#structdspi__device__t">dspi_device_t</a> * restrict device,</div>
<div class="line">                                    <span class="keyword">const</span> uint8_t * sendBuffer,</div>
<div class="line">                                    uint8_t * receiveBuffer,</div>
<div class="line">                                    uint32_t transferByteCount);</div>
<div class="line"><span class="comment">/* Example function call */</span></div>
<div class="line"><a class="code" href="group__dspi__master__driver.html#gae17887e13923d6808d726da65407574b">DSPI_DRV_MasterTransferData</a>(masterInstance, NULL, s_dspiSourceBuffer[masterInstance], s_dspiSinkBuffer[masterInstance], 32);</div>
<div class="line"></div>
<div class="line"><span class="comment">/* For non-blocking/async transfers, need to check back to get transfer status, for example */</span></div>
<div class="line"><span class="comment">/* Where framesXfer returns the number of frames transferred */</span></div>
<div class="line"><a class="code" href="group__dspi__master__driver.html#ga4c962f4f1d462d30d275c52f118d04c5">DSPI_DRV_MasterGetTransferStatus</a>(masterInstance, &amp;framesXfer);</div>
</div><!-- fragment -->To abort a transfer, simply call: </p>
<div class="fragment"><div class="line"><a class="code" href="group__dspi__hal.html#ga34b3b8e88f67e380c7e5f50e2422774c">dspi_status_t</a> <a class="code" href="group__dspi__master__driver.html#ga08ca2ffc48f8a7fe72694571e067b5a1">DSPI_DRV_MasterAbortTransfer</a>(masterInstance);</div>
</div><!-- fragment --><h1>De-initialization</h1>
To de-initialize or shut down the DSPI module, call the function: </p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> <a class="code" href="group__dspi__master__driver.html#gaf0acb74e62f52653da8b803b34d4b950">DSPI_DRV_MasterDeinit</a>(masterInstance);</div>
</div><!-- fragment --> </div><hr/><h2 class="groupheader">Data Structure Documentation</h2>
<a name="structdspi__device__t" id="structdspi__device__t"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct dspi_device_t</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock"><p>The user must fill out these members to set up the DSPI master to properly communicate with the SPI device. </p>
</div><table class="memberdecls">
<tr><td colspan="2"><h3>Data Fields</h3></td></tr>
<tr class="memitem:ac497d381e4bb407f8968ad34c47e7abd"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__dspi__master__driver.html#ac497d381e4bb407f8968ad34c47e7abd">bitsPerSec</a></td></tr>
<tr class="memdesc:ac497d381e4bb407f8968ad34c47e7abd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Baud rate in bits per second.  <a href="#ac497d381e4bb407f8968ad34c47e7abd">More...</a><br/></td></tr>
<tr class="separator:ac497d381e4bb407f8968ad34c47e7abd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1896b453c3e35a063eeb4211bd0bd7a4"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a1896b453c3e35a063eeb4211bd0bd7a4"></a>
<a class="el" href="group__dspi__hal.html#structdspi__data__format__config__t">dspi_data_format_config_t</a>&#160;</td><td class="memItemRight" valign="bottom"><b>dataBusConfig</b></td></tr>
<tr class="separator:a1896b453c3e35a063eeb4211bd0bd7a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h4 class="groupheader">Field Documentation</h4>
<a class="anchor" id="ac497d381e4bb407f8968ad34c47e7abd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t dspi_device_t::bitsPerSec</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>

</div>
</div>
<a name="structdspi__master__state__t" id="structdspi__master__state__t"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct dspi_master_state_t</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock"><p>This structure holds data that is used by the DSPI master peripheral driver to communicate between the transfer function and the interrupt handler. The interrupt handler also uses this information to keep track of its progress. The user must pass the memory for this run-time state structure and the DSPI master driver fills out the members. </p>
</div><table class="memberdecls">
<tr><td colspan="2"><h3>Data Fields</h3></td></tr>
<tr class="memitem:a8447aa1f8e3c7a042f6067d5db229b3d"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a8447aa1f8e3c7a042f6067d5db229b3d"></a>
<a class="el" href="group__dspi__hal.html#ga992d5562af4cf4c45371feb8c5c1a1bf">dspi_ctar_selection_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__dspi__master__driver.html#a8447aa1f8e3c7a042f6067d5db229b3d">whichCtar</a></td></tr>
<tr class="memdesc:a8447aa1f8e3c7a042f6067d5db229b3d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Desired Clock and Transfer Attributes Register (CTAR) <br/></td></tr>
<tr class="separator:a8447aa1f8e3c7a042f6067d5db229b3d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab807db073ddedf4b2d9501623f20a1ce"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab807db073ddedf4b2d9501623f20a1ce"></a>
uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__dspi__master__driver.html#ab807db073ddedf4b2d9501623f20a1ce">bitsPerFrame</a></td></tr>
<tr class="memdesc:ab807db073ddedf4b2d9501623f20a1ce"><td class="mdescLeft">&#160;</td><td class="mdescRight">Desired number of bits per frame. <br/></td></tr>
<tr class="separator:ab807db073ddedf4b2d9501623f20a1ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a746431edc005d62720977114c967e3d7"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a746431edc005d62720977114c967e3d7"></a>
<a class="el" href="group__dspi__hal.html#ga3d9d9a8fe16a51e6c697a547ab65bef1">dspi_which_pcs_config_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__dspi__master__driver.html#a746431edc005d62720977114c967e3d7">whichPcs</a></td></tr>
<tr class="memdesc:a746431edc005d62720977114c967e3d7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Desired Peripheral Chip Select (pcs) <br/></td></tr>
<tr class="separator:a746431edc005d62720977114c967e3d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a522a8f6ed8231786eebb958cc3d6c748"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a522a8f6ed8231786eebb958cc3d6c748"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__dspi__master__driver.html#a522a8f6ed8231786eebb958cc3d6c748">isChipSelectContinuous</a></td></tr>
<tr class="memdesc:a522a8f6ed8231786eebb958cc3d6c748"><td class="mdescLeft">&#160;</td><td class="mdescRight">Option to enable the continuous assertion of chip select between transfers. <br/></td></tr>
<tr class="separator:a522a8f6ed8231786eebb958cc3d6c748"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a25474cfb3a0cbb6b2f29c6025de9c241"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a25474cfb3a0cbb6b2f29c6025de9c241"></a>
uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__dspi__master__driver.html#a25474cfb3a0cbb6b2f29c6025de9c241">dspiSourceClock</a></td></tr>
<tr class="memdesc:a25474cfb3a0cbb6b2f29c6025de9c241"><td class="mdescLeft">&#160;</td><td class="mdescRight">Module source clock. <br/></td></tr>
<tr class="separator:a25474cfb3a0cbb6b2f29c6025de9c241"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae2ad5f35d37f7d19f933605fa33d7a33"><td class="memItemLeft" align="right" valign="top">volatile bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__dspi__master__driver.html#ae2ad5f35d37f7d19f933605fa33d7a33">isTransferInProgress</a></td></tr>
<tr class="memdesc:ae2ad5f35d37f7d19f933605fa33d7a33"><td class="mdescLeft">&#160;</td><td class="mdescRight">True if there is an active transfer.  <a href="#ae2ad5f35d37f7d19f933605fa33d7a33">More...</a><br/></td></tr>
<tr class="separator:ae2ad5f35d37f7d19f933605fa33d7a33"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aec2e583d31be6c259eddb9e845ecec5b"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__dspi__master__driver.html#aec2e583d31be6c259eddb9e845ecec5b">isTransferAsync</a></td></tr>
<tr class="memdesc:aec2e583d31be6c259eddb9e845ecec5b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Whether the transfer is asynchronous (needed in IRQ).  <a href="#aec2e583d31be6c259eddb9e845ecec5b">More...</a><br/></td></tr>
<tr class="separator:aec2e583d31be6c259eddb9e845ecec5b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7181fcfc961e15d89d34a05627e85672"><td class="memItemLeft" align="right" valign="top">const uint8_t *restrict&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__dspi__master__driver.html#a7181fcfc961e15d89d34a05627e85672">sendBuffer</a></td></tr>
<tr class="memdesc:a7181fcfc961e15d89d34a05627e85672"><td class="mdescLeft">&#160;</td><td class="mdescRight">The buffer from which transmitted bytes are taken.  <a href="#a7181fcfc961e15d89d34a05627e85672">More...</a><br/></td></tr>
<tr class="separator:a7181fcfc961e15d89d34a05627e85672"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab8137d47085c2976694781bc65b7ddd7"><td class="memItemLeft" align="right" valign="top">uint8_t *restrict&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__dspi__master__driver.html#ab8137d47085c2976694781bc65b7ddd7">receiveBuffer</a></td></tr>
<tr class="memdesc:ab8137d47085c2976694781bc65b7ddd7"><td class="mdescLeft">&#160;</td><td class="mdescRight">The buffer into which received bytes are placed.  <a href="#ab8137d47085c2976694781bc65b7ddd7">More...</a><br/></td></tr>
<tr class="separator:ab8137d47085c2976694781bc65b7ddd7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9e4e19eecde4dd06a2cc7b34c1afb482"><td class="memItemLeft" align="right" valign="top">volatile size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__dspi__master__driver.html#a9e4e19eecde4dd06a2cc7b34c1afb482">remainingSendByteCount</a></td></tr>
<tr class="memdesc:a9e4e19eecde4dd06a2cc7b34c1afb482"><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of bytes remaining to send.  <a href="#a9e4e19eecde4dd06a2cc7b34c1afb482">More...</a><br/></td></tr>
<tr class="separator:a9e4e19eecde4dd06a2cc7b34c1afb482"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0949ba24311bf711645b495aba1835bb"><td class="memItemLeft" align="right" valign="top">volatile size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__dspi__master__driver.html#a0949ba24311bf711645b495aba1835bb">remainingReceiveByteCount</a></td></tr>
<tr class="memdesc:a0949ba24311bf711645b495aba1835bb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of bytes remaining to receive.  <a href="#a0949ba24311bf711645b495aba1835bb">More...</a><br/></td></tr>
<tr class="separator:a0949ba24311bf711645b495aba1835bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a45498ed7c37d843bbcda3f386419dd99"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__os__abstraction__bm.html#structsemaphore__t">semaphore_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__dspi__master__driver.html#a45498ed7c37d843bbcda3f386419dd99">irqSync</a></td></tr>
<tr class="memdesc:a45498ed7c37d843bbcda3f386419dd99"><td class="mdescLeft">&#160;</td><td class="mdescRight">Used to wait for ISR to complete its business.  <a href="#a45498ed7c37d843bbcda3f386419dd99">More...</a><br/></td></tr>
<tr class="separator:a45498ed7c37d843bbcda3f386419dd99"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad0a51d741949b87e16d4dc8f717a7fed"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad0a51d741949b87e16d4dc8f717a7fed"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__dspi__master__driver.html#ad0a51d741949b87e16d4dc8f717a7fed">useDma</a></td></tr>
<tr class="memdesc:ad0a51d741949b87e16d4dc8f717a7fed"><td class="mdescLeft">&#160;</td><td class="mdescRight">User option to invoke usage of DMA. <br/></td></tr>
<tr class="separator:ad0a51d741949b87e16d4dc8f717a7fed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a486b60de83b2dfbbb6c16181807c88cb"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a486b60de83b2dfbbb6c16181807c88cb"></a>
<a class="el" href="group__edma__driver.html#structedma__chn__state__t">edma_chn_state_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__dspi__master__driver.html#a486b60de83b2dfbbb6c16181807c88cb">dmaCmdData2Fifo</a></td></tr>
<tr class="memdesc:a486b60de83b2dfbbb6c16181807c88cb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Structure definition for the eDMA channel. <br/></td></tr>
<tr class="separator:a486b60de83b2dfbbb6c16181807c88cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af4cdb5f16b1b5f5c44f3c1a7c260899c"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af4cdb5f16b1b5f5c44f3c1a7c260899c"></a>
<a class="el" href="group__edma__driver.html#structedma__chn__state__t">edma_chn_state_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__dspi__master__driver.html#af4cdb5f16b1b5f5c44f3c1a7c260899c">dmaSrc2CmdData</a></td></tr>
<tr class="memdesc:af4cdb5f16b1b5f5c44f3c1a7c260899c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Structure definition for the eDMA channel. <br/></td></tr>
<tr class="separator:af4cdb5f16b1b5f5c44f3c1a7c260899c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a472b12e290ef6e5c3d62fe310edae53f"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a472b12e290ef6e5c3d62fe310edae53f"></a>
<a class="el" href="group__edma__driver.html#structedma__chn__state__t">edma_chn_state_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__dspi__master__driver.html#a472b12e290ef6e5c3d62fe310edae53f">dmaFifo2Receive</a></td></tr>
<tr class="memdesc:a472b12e290ef6e5c3d62fe310edae53f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Structure definition for the eDMA channel. <br/></td></tr>
<tr class="separator:a472b12e290ef6e5c3d62fe310edae53f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3fb991d8674699b65fe6569045882b8a"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a3fb991d8674699b65fe6569045882b8a"></a>
<a class="el" href="group__edma__hal.html#structedma__software__tcd__t">edma_software_tcd_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__dspi__master__driver.html#a3fb991d8674699b65fe6569045882b8a">stcdSrc2CmdDataLast</a></td></tr>
<tr class="memdesc:a3fb991d8674699b65fe6569045882b8a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pointer to SW TCD in memory. <br/></td></tr>
<tr class="separator:a3fb991d8674699b65fe6569045882b8a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h4 class="groupheader">Field Documentation</h4>
<a class="anchor" id="ae2ad5f35d37f7d19f933605fa33d7a33"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile bool dspi_master_state_t::isTransferInProgress</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="aec2e583d31be6c259eddb9e845ecec5b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool dspi_master_state_t::isTransferAsync</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a7181fcfc961e15d89d34a05627e85672"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const uint8_t* restrict dspi_master_state_t::sendBuffer</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="ab8137d47085c2976694781bc65b7ddd7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t* restrict dspi_master_state_t::receiveBuffer</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a9e4e19eecde4dd06a2cc7b34c1afb482"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile size_t dspi_master_state_t::remainingSendByteCount</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a0949ba24311bf711645b495aba1835bb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile size_t dspi_master_state_t::remainingReceiveByteCount</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a45498ed7c37d843bbcda3f386419dd99"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__os__abstraction__bm.html#structsemaphore__t">semaphore_t</a> dspi_master_state_t::irqSync</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>

</div>
</div>
<a name="structdspi__master__user__config__t" id="structdspi__master__user__config__t"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct dspi_master_user_config_t</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock"><p>Use an instance of this structure with the <a class="el" href="group__dspi__master__driver.html#ga37d57c2ed98daaa6340d50054d617967" title="Initializes a DSPI instance for master mode operation. ">DSPI_DRV_MasterInit()</a>. This allows the user to configure the most common settings of the DSPI peripheral with a single function call. </p>
</div><table class="memberdecls">
<tr><td colspan="2"><h3>Data Fields</h3></td></tr>
<tr class="memitem:a8514df82b4b4c68f4de58a3ed160faf1"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a8514df82b4b4c68f4de58a3ed160faf1"></a>
<a class="el" href="group__dspi__hal.html#ga992d5562af4cf4c45371feb8c5c1a1bf">dspi_ctar_selection_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__dspi__master__driver.html#a8514df82b4b4c68f4de58a3ed160faf1">whichCtar</a></td></tr>
<tr class="memdesc:a8514df82b4b4c68f4de58a3ed160faf1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Desired Clock and Transfer Attributes Register(CTAR) <br/></td></tr>
<tr class="separator:a8514df82b4b4c68f4de58a3ed160faf1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c46d04d4031ebb56a12c665a0d17aaa"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a6c46d04d4031ebb56a12c665a0d17aaa"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__dspi__master__driver.html#a6c46d04d4031ebb56a12c665a0d17aaa">isSckContinuous</a></td></tr>
<tr class="memdesc:a6c46d04d4031ebb56a12c665a0d17aaa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Disable or Enable continuous SCK operation. <br/></td></tr>
<tr class="separator:a6c46d04d4031ebb56a12c665a0d17aaa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada9c810904ee8e24abefb25b9045c125"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ada9c810904ee8e24abefb25b9045c125"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__dspi__master__driver.html#ada9c810904ee8e24abefb25b9045c125">isChipSelectContinuous</a></td></tr>
<tr class="memdesc:ada9c810904ee8e24abefb25b9045c125"><td class="mdescLeft">&#160;</td><td class="mdescRight">Option to enable the continuous assertion of chip select between transfers. <br/></td></tr>
<tr class="separator:ada9c810904ee8e24abefb25b9045c125"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6433c1800d2a85da45ae347022c3cd9b"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a6433c1800d2a85da45ae347022c3cd9b"></a>
<a class="el" href="group__dspi__hal.html#ga3d9d9a8fe16a51e6c697a547ab65bef1">dspi_which_pcs_config_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__dspi__master__driver.html#a6433c1800d2a85da45ae347022c3cd9b">whichPcs</a></td></tr>
<tr class="memdesc:a6433c1800d2a85da45ae347022c3cd9b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Desired Peripheral Chip Select (pcs) <br/></td></tr>
<tr class="separator:a6433c1800d2a85da45ae347022c3cd9b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa8b1f2458668337b90a340a4ecaf4aa4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__dspi__hal.html#gab466e73cb54b2c023459d43918c4197d">dspi_pcs_polarity_config_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__dspi__master__driver.html#aa8b1f2458668337b90a340a4ecaf4aa4">pcsPolarity</a></td></tr>
<tr class="memdesc:aa8b1f2458668337b90a340a4ecaf4aa4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Peripheral Chip Select (pcs) polarity setting.  <a href="#aa8b1f2458668337b90a340a4ecaf4aa4">More...</a><br/></td></tr>
<tr class="separator:aa8b1f2458668337b90a340a4ecaf4aa4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h4 class="groupheader">Field Documentation</h4>
<a class="anchor" id="aa8b1f2458668337b90a340a4ecaf4aa4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__dspi__hal.html#gab466e73cb54b2c023459d43918c4197d">dspi_pcs_polarity_config_t</a> dspi_master_user_config_t::pcsPolarity</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga37d57c2ed98daaa6340d50054d617967"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__dspi__hal.html#ga34b3b8e88f67e380c7e5f50e2422774c">dspi_status_t</a> DSPI_DRV_MasterInit </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>instance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__dspi__master__driver.html#structdspi__master__state__t">dspi_master_state_t</a> *&#160;</td>
          <td class="paramname"><em>dspiState</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="group__dspi__master__driver.html#structdspi__master__user__config__t">dspi_master_user_config_t</a> *&#160;</td>
          <td class="paramname"><em>userConfig</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function uses a CPU interrupt driven method for transferring data. This function initializes the run-time state structure to track the ongoing transfers, ungates the clock to the DSPI module, resets the DSPI module, initializes the module to user defined settings and default settings, configures the IRQ state structure, enables the module-level interrupt to the core, and enables the DSPI module. The CTAR parameter is special in that it allows the user to have different SPI devices connected to the same DSPI module instance in addition to different peripheral chip selects. Each CTAR contains the bus attributes associated with that particular SPI device. For most use cases where only one SPI device is connected per DSPI module instance, use CTAR0. This is an example to set up the <a class="el" href="group__dspi__master__driver.html#structdspi__master__state__t" title="Runtime state structure for the DSPI master driver. ">dspi_master_state_t</a> and the <a class="el" href="group__dspi__master__driver.html#structdspi__master__user__config__t" title="The user configuration structure for the DSPI master driver. ">dspi_master_user_config_t</a> parameters and to call the DSPI_DRV_MasterInit function by passing in these parameters: </p>
<div class="fragment"><div class="line"><a class="code" href="group__dspi__master__driver.html#structdspi__master__state__t">dspi_master_state_t</a> dspiMasterState; &lt;- the user simply allocates memory <span class="keywordflow">for</span> <span class="keyword">this</span> <span class="keyword">struct</span></div>
<div class="line">uint32_t calculatedBaudRate;</div>
<div class="line"><a class="code" href="group__dspi__master__driver.html#structdspi__master__user__config__t">dspi_master_user_config_t</a> userConfig; &lt;- the user fills out members <span class="keywordflow">for</span> <span class="keyword">this</span> <span class="keyword">struct</span></div>
<div class="line">userConfig.<a class="code" href="group__dspi__master__driver.html#ada9c810904ee8e24abefb25b9045c125">isChipSelectContinuous</a> = <span class="keyword">false</span>;</div>
<div class="line">userConfig.<a class="code" href="group__dspi__master__driver.html#a6c46d04d4031ebb56a12c665a0d17aaa">isSckContinuous</a> = <span class="keyword">false</span>;</div>
<div class="line">userConfig.<a class="code" href="group__dspi__master__driver.html#aa8b1f2458668337b90a340a4ecaf4aa4">pcsPolarity</a> = <a class="code" href="group__dspi__hal.html#ggab466e73cb54b2c023459d43918c4197daf89a174f7da2c2d1dd94eaee5f451ac7">kDspiPcs_ActiveLow</a>;</div>
<div class="line">userConfig.<a class="code" href="group__dspi__master__driver.html#a8514df82b4b4c68f4de58a3ed160faf1">whichCtar</a> = <a class="code" href="group__dspi__hal.html#gga992d5562af4cf4c45371feb8c5c1a1bfa21d94da5d7c4e6134907fad358147b35">kDspiCtar0</a>;</div>
<div class="line">userConfig.<a class="code" href="group__dspi__master__driver.html#a6433c1800d2a85da45ae347022c3cd9b">whichPcs</a> = <a class="code" href="group__dspi__hal.html#gga3d9d9a8fe16a51e6c697a547ab65bef1abf98b398d467bec5ce1332e7769b9c97">kDspiPcs0</a>;</div>
<div class="line"><a class="code" href="group__dspi__master__driver.html#ga37d57c2ed98daaa6340d50054d617967">DSPI_DRV_MasterInit</a>(masterInstance, &amp;dspiMasterState, &amp;userConfig);</div>
</div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">instance</td><td>The instance number of the DSPI peripheral. </td></tr>
    <tr><td class="paramname">dspiState</td><td>The pointer to the DSPI master driver state structure. The user must pass the memory for this run-time state structure and the DSPI master driver fills out the members. This run-time state structure keeps track of the transfer in progress. </td></tr>
    <tr><td class="paramname">userConfig</td><td>The <a class="el" href="group__dspi__master__driver.html#structdspi__master__user__config__t" title="The user configuration structure for the DSPI master driver. ">dspi_master_user_config_t</a> user configuration structure. The user must fill out the members of this structure and pass the pointer of this struct into the function.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>An error code or kStatus_DSPI_Success. </dd></dl>

</div>
</div>
<a class="anchor" id="ga3b9dafbf84284f44385b4bc302ebcb84"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__dspi__hal.html#ga34b3b8e88f67e380c7e5f50e2422774c">dspi_status_t</a> DSPI_DRV_MasterInitDma </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>instance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__dspi__master__driver.html#structdspi__master__state__t">dspi_master_state_t</a> *&#160;</td>
          <td class="paramname"><em>dspiState</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="group__dspi__master__driver.html#structdspi__master__user__config__t">dspi_master_user_config_t</a> *&#160;</td>
          <td class="paramname"><em>userConfig</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__edma__hal.html#structedma__software__tcd__t">edma_software_tcd_t</a> *&#160;</td>
          <td class="paramname"><em>stcdSrc2CmdDataLast</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function is exactly like the DSPI_DRV_MasterInit function but in addition, adds DMA support. If the user desires to use DMA based transfers, then the user should use this function call instead of the DSPI_DRV_MasterInit function call. Like the DSPI_DRV_MasterInit, this function initializes the run-time state structure to track the ongoing transfers, ungates the clock to the DSPI module, resets the DSPI module, initializes the module to user defined settings and default settings, configures the IRQ state structure, enables the module-level interrupt to the core, and enables the DSPI module. The CTAR parameter is special in that it allows the user to have different SPI devices connected to the same DSPI module instance in addition to different peripheral chip selects. Each CTAR contains the bus attributes associated with that particular SPI device. For most use cases where only one SPI device is connected per DSPI module instance, use CTAR0. This is an example to set up the <a class="el" href="group__dspi__master__driver.html#structdspi__master__state__t" title="Runtime state structure for the DSPI master driver. ">dspi_master_state_t</a> and the <a class="el" href="group__dspi__master__driver.html#structdspi__master__user__config__t" title="The user configuration structure for the DSPI master driver. ">dspi_master_user_config_t</a> parameters and to call the DSPI_DRV_MasterInit function by passing in these parameters: </p>
<div class="fragment"><div class="line"><a class="code" href="group__dspi__master__driver.html#structdspi__master__state__t">dspi_master_state_t</a> dspiMasterState; &lt;- the user simply allocates memory <span class="keywordflow">for</span> <span class="keyword">this</span> <span class="keyword">struct</span></div>
<div class="line">uint32_t calculatedBaudRate;</div>
<div class="line"><a class="code" href="group__dspi__master__driver.html#structdspi__master__user__config__t">dspi_master_user_config_t</a> userConfig; &lt;- the user fills out members <span class="keywordflow">for</span> <span class="keyword">this</span> <span class="keyword">struct</span></div>
<div class="line">userConfig.<a class="code" href="group__dspi__master__driver.html#ada9c810904ee8e24abefb25b9045c125">isChipSelectContinuous</a> = <span class="keyword">false</span>;</div>
<div class="line">userConfig.<a class="code" href="group__dspi__master__driver.html#a6c46d04d4031ebb56a12c665a0d17aaa">isSckContinuous</a> = <span class="keyword">false</span>;</div>
<div class="line">userConfig.<a class="code" href="group__dspi__master__driver.html#aa8b1f2458668337b90a340a4ecaf4aa4">pcsPolarity</a> = <a class="code" href="group__dspi__hal.html#ggab466e73cb54b2c023459d43918c4197daf89a174f7da2c2d1dd94eaee5f451ac7">kDspiPcs_ActiveLow</a>;</div>
<div class="line">userConfig.<a class="code" href="group__dspi__master__driver.html#a8514df82b4b4c68f4de58a3ed160faf1">whichCtar</a> = <a class="code" href="group__dspi__hal.html#gga992d5562af4cf4c45371feb8c5c1a1bfa21d94da5d7c4e6134907fad358147b35">kDspiCtar0</a>;</div>
<div class="line">userConfig.<a class="code" href="group__dspi__master__driver.html#a6433c1800d2a85da45ae347022c3cd9b">whichPcs</a> = <a class="code" href="group__dspi__hal.html#gga3d9d9a8fe16a51e6c697a547ab65bef1abf98b398d467bec5ce1332e7769b9c97">kDspiPcs0</a>;</div>
<div class="line"><a class="code" href="group__edma__hal.html#structedma__software__tcd__t">edma_software_tcd_t</a> stcdSrc2CmdDataLast; &lt;- needs to be aligned to a 32-byte boundary</div>
<div class="line"><a class="code" href="group__dspi__master__driver.html#ga37d57c2ed98daaa6340d50054d617967">DSPI_DRV_MasterInit</a>(masterInstance, &amp;dspiMasterState, &amp;userConfig, &amp;stcdSrc2CmdDataLast);</div>
</div><!-- fragment --><p>This initialization function also configures the eDMA module by requesting channels for DMA operation and sets a "use_dma" flag in the run-time state structure to notify transfer functions to use DMA driven operations.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">instance</td><td>The instance number of the DSPI peripheral. </td></tr>
    <tr><td class="paramname">dspiState</td><td>The pointer to the DSPI master driver state structure. The user must pass the memory for this run-time state structure and the DSPI master driver fills out the members. This run-time state structure keeps track of the transfer in progress. </td></tr>
    <tr><td class="paramname">userConfig</td><td>The <a class="el" href="group__dspi__master__driver.html#structdspi__master__user__config__t" title="The user configuration structure for the DSPI master driver. ">dspi_master_user_config_t</a> user configuration structure. The user must fill out the members of this structure and pass the pointer of this structure into the function. </td></tr>
    <tr><td class="paramname">stcdSrc2CmdDataLast</td><td>This is a pointer to a structure of type stcdSrc2CmdDataLast. This pointer needs to be aligned to a 32-byte boundary. Some compilers allow you to use a #pragma directive to align a variable to a desired boundary. The following is an example on how to align this variable to a 32-byte boundary: <div class="fragment"><div class="line"><span class="preprocessor">#pragma data_alignment=32     &lt;- Normally this is defined as a global variable</span></div>
<div class="line"><span class="preprocessor">    edma_software_tcd_t stcdSrc2CmdDataLast;</span></div>
</div><!-- fragment --></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>An error code or kStatus_DSPI_Success.</dd></dl>
<p>Note: The pointer parameter "stcdSrc2CmdDataLast" needs to be aligned to a 32-byte boundary. Also note, the only DSPI instance supported for DMA based operation is instance 0. </p>

</div>
</div>
<a class="anchor" id="gaf0acb74e62f52653da8b803b34d4b950"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void DSPI_DRV_MasterDeinit </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>instance</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function resets the DSPI peripheral, gates its clock, and disables the interrupt to the core.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">instance</td><td>The instance number of the DSPI peripheral. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga705cfda5272cff31714e7167eed5ca7c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__dspi__hal.html#ga34b3b8e88f67e380c7e5f50e2422774c">dspi_status_t</a> DSPI_DRV_MasterSetDelay </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>instance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__dspi__hal.html#ga1ca2fbee37b3cb046c075a7e765d64ed">dspi_delay_type_t</a>&#160;</td>
          <td class="paramname"><em>whichDelay</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>delayInNanoSec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t *&#160;</td>
          <td class="paramname"><em>calculatedDelay</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function allows the user to take advantage of the DSPI module's delay options in order to "fine tune" some of the signal timings to match the timing needs of a slower peripheral device. This is an optional function that can be called after the DSPI module has been initialized for master mode. The bus timing delays that can be adjusted are listed below:</p>
<p>PCS to SCK Delay: Adjustable delay option between the assertion of the PCS signal to the first SCK edge.</p>
<p>After SCK Delay: Adjustable delay option between the last edge of SCK to the de-assertion of the PCS signal.</p>
<p>Delay after Transfer: Adjustable delay option between the de-assertion of the PCS signal for a frame to the assertion of the PCS signal for the next frame. Note this is not adjustable for continuous clock mode as this delay is fixed at one SCK period.</p>
<p>Each of the above delay parameters use both a pre-scalar and scalar value to calculate the needed delay. This function takes in as a parameter the desired delay type and the delay value (in nanoseconds), calculates the values needed for the prescaler and scaler. Returning the actual calculated delay as an exact delay match may not be possible. In this case, the closest match is calculated without going below the desired delay value input. It is possible to input a very large delay value that exceeds the capability of the part, in which case the maximum supported delay is returned. In addition, the function returns an out-of-range status.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">instance</td><td>The instance number of the DSPI peripheral. </td></tr>
    <tr><td class="paramname">whichDelay</td><td>The desired delay to configure, must be of type dspi_delay_type_t </td></tr>
    <tr><td class="paramname">delayInNanoSec</td><td>The desired delay value in nano-seconds. </td></tr>
    <tr><td class="paramname">calculatedDelay</td><td>The calculated delay that best matches the desired delay (in nano-seconds). </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Either kStatus_DSPI_Success or kStatus_DSPI_OutOfRange if the desired delay exceeds the capability of the device. </dd></dl>

</div>
</div>
<a class="anchor" id="ga484ec4f6557a5f8aa3dffa4dfc7b3ba0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__dspi__hal.html#ga34b3b8e88f67e380c7e5f50e2422774c">dspi_status_t</a> DSPI_DRV_MasterConfigureBus </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>instance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="group__dspi__master__driver.html#structdspi__device__t">dspi_device_t</a> *&#160;</td>
          <td class="paramname"><em>device</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t *&#160;</td>
          <td class="paramname"><em>calculatedBaudRate</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The term "device" is used to indicate the SPI device for which the DSPI master is communicating. The user has two options to configure the device parameters: either pass in the pointer to the device configuration structure to the desired transfer function (see DSPI_DRV_MasterTransferDataBlocking or DSPI_DRV_MasterTransferData) or pass it in to the DSPI_DRV_MasterConfigureBus function. The user can pass in a device structure to the transfer function which contains the parameters for the bus (the transfer function then calls this function). However, the user has the option to call this function directly especially to get the calculated baud rate, at which point they may pass in NULL for the device structure in the transfer function (assuming they have called this configure bus function first). This is an example to set up the <a class="el" href="group__dspi__master__driver.html#structdspi__device__t" title="Data structure containing information about a device on the SPI bus. ">dspi_device_t</a> structure to call the DSPI_DRV_MasterConfigureBus function by passing in these parameters: </p>
<div class="fragment"><div class="line"><a class="code" href="group__dspi__master__driver.html#structdspi__device__t">dspi_device_t</a> spiDevice;</div>
<div class="line">spiDevice.dataBusConfig.<a class="code" href="group__dspi__hal.html#a99d8d0dec68d5d2c1de35f8bb8b66a75">bitsPerFrame</a> = 16;</div>
<div class="line">spiDevice.dataBusConfig.<a class="code" href="group__dspi__hal.html#ad751cbe15bfe01f02088e2a36059774a">clkPhase</a> = <a class="code" href="group__dspi__hal.html#gga4269ec144334dd60666a92e6fd2c1476ada723d5970a0b0a28d96a0e707cabd9c">kDspiClockPhase_FirstEdge</a>;</div>
<div class="line">spiDevice.dataBusConfig.<a class="code" href="group__dspi__hal.html#a8926c27980536d08b063f984cc5dc751">clkPolarity</a> = <a class="code" href="group__dspi__hal.html#gga1e0a9074742794ef89f597d220296651afffdb6de18c3b46c509c406ac7230586">kDspiClockPolarity_ActiveHigh</a>;</div>
<div class="line">spiDevice.dataBusConfig.<a class="code" href="group__dspi__hal.html#a7b5fc2246586c461ebd0325bba2e3113">direction</a> = <a class="code" href="group__dspi__hal.html#gga06fad8ae17b680f6dddfd798c9d3b30daed75ebb641f649ff0c4eb77d2624bcf2">kDspiMsbFirst</a>;</div>
<div class="line">spiDevice.<a class="code" href="group__dspi__master__driver.html#ac497d381e4bb407f8968ad34c47e7abd">bitsPerSec</a> = 50000;</div>
<div class="line"><a class="code" href="group__dspi__master__driver.html#ga484ec4f6557a5f8aa3dffa4dfc7b3ba0">DSPI_DRV_MasterConfigureBus</a>(instance, &amp;spiDevice, &amp;calculatedBaudRate);</div>
</div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">instance</td><td>The instance number of the DSPI peripheral. </td></tr>
    <tr><td class="paramname">device</td><td>Pointer to the device information structure. This structure contains the settings for the SPI bus configuration. The device parameters are the desired baud rate (in bits-per-sec), and the data format field which consists of bits-per-frame, clock polarity and phase, and data shift direction. </td></tr>
    <tr><td class="paramname">calculatedBaudRate</td><td>The calculated baud rate passed back to the user to determine if the calculated baud rate is close enough to meet the needs. The baud rate never exceeds the desired baud rate. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>An error code or kStatus_DSPI_Success. </dd></dl>

</div>
</div>
<a class="anchor" id="ga3ad627b384f3552c44272b6a6fbdf3d2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__dspi__hal.html#ga34b3b8e88f67e380c7e5f50e2422774c">dspi_status_t</a> DSPI_DRV_MasterTransferDataBlocking </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>instance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="group__dspi__master__driver.html#structdspi__device__t">dspi_device_t</a> *restrict&#160;</td>
          <td class="paramname"><em>device</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>sendBuffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>receiveBuffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>transferByteCount</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>timeout</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function simultaneously sends and receives data on the SPI bus, as SPI is naturally a full-duplex bus. The function does not return until the transfer is complete.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">instance</td><td>The instance number of the DSPI peripheral. </td></tr>
    <tr><td class="paramname">device</td><td>Pointer to the device information structure. This structure contains the settings for the SPI bus configuration in this transfer. You may pass NULL for this parameter, in which case the current bus configuration is used unmodified. The device can be configured separately by calling the DSPI_DRV_MasterConfigureBus function. </td></tr>
    <tr><td class="paramname">sendBuffer</td><td>The pointer to the data buffer of the data to send. You may pass NULL for this parameter and bytes with a value of 0 (zero) is sent. </td></tr>
    <tr><td class="paramname">receiveBuffer</td><td>Pointer to the buffer where the received bytes are stored. If you pass NULL for this parameter, the received bytes are ignored. </td></tr>
    <tr><td class="paramname">transferByteCount</td><td>The number of bytes to send and receive. </td></tr>
    <tr><td class="paramname">timeout</td><td>A timeout for the transfer in microseconds. If the transfer takes longer than this amount of time, the transfer is aborted and a <a class="el" href="group__spi__hal.html#gga856ecadf3d7fe18c4fc3ae56500f8982a496ced6fffc33d7bbeb01d203dfc4836" title="SPI transfer timed out. ">kStatus_SPI_Timeout</a> error returned.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">kStatus_DSPI_Success</td><td>The transfer was successful. </td></tr>
    <tr><td class="paramname">kStatus_DSPI_Busy</td><td>Cannot perform transfer because a transfer is already in progress. </td></tr>
    <tr><td class="paramname">kStatus_DSPI_Timeout</td><td>The transfer timed out and was aborted. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="gae17887e13923d6808d726da65407574b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__dspi__hal.html#ga34b3b8e88f67e380c7e5f50e2422774c">dspi_status_t</a> DSPI_DRV_MasterTransferData </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>instance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="group__dspi__master__driver.html#structdspi__device__t">dspi_device_t</a> *restrict&#160;</td>
          <td class="paramname"><em>device</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>sendBuffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>receiveBuffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>transferByteCount</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function returns immediately. The user must check back to check whether the transfer is complete (using the DSPI_DRV_MasterGetTransferStatus function). This function simultaneously sends and receives data on the SPI bus, as SPI is naturally a full-duplex bus.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">instance</td><td>The instance number of the DSPI peripheral. </td></tr>
    <tr><td class="paramname">device</td><td>Pointer to the device information structure. This structure contains the settings for the SPI bus configuration in this transfer. You may pass NULL for this parameter, in which case the current bus configuration is used unmodified. The device can be configured separately by calling the DSPI_DRV_MasterConfigureBus function. </td></tr>
    <tr><td class="paramname">sendBuffer</td><td>The pointer to the data buffer of the data to send. You may pass NULL for this parameter, in which case bytes with a value of 0 (zero) are sent. </td></tr>
    <tr><td class="paramname">receiveBuffer</td><td>Pointer to the buffer where the received bytes are stored. If you pass NULL for this parameter, the received bytes are ignored. </td></tr>
    <tr><td class="paramname">transferByteCount</td><td>The number of bytes to send and receive.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">kStatus_DSPI_Success</td><td>The transfer was successful. </td></tr>
    <tr><td class="paramname">kStatus_DSPI_Busy</td><td>Cannot perform transfer because a transfer is already in progress. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga4c962f4f1d462d30d275c52f118d04c5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__dspi__hal.html#ga34b3b8e88f67e380c7e5f50e2422774c">dspi_status_t</a> DSPI_DRV_MasterGetTransferStatus </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>instance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t *&#160;</td>
          <td class="paramname"><em>framesTransferred</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>When performing an a-sync transfer, the user can call this function to ascertain the state of the current transfer: in progress (or busy) or complete (success). In addition, if the transfer is still in progress, the user can get the number of words that have been transferred up to now.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">instance</td><td>The instance number of the DSPI peripheral. </td></tr>
    <tr><td class="paramname">framesTransferred</td><td>Pointer to value that is filled in with the number of frames that have been sent in the active transfer. A frame is defined as the number of bits per frame.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">kStatus_DSPI_Success</td><td>The transfer has completed successfully. </td></tr>
    <tr><td class="paramname">kStatus_DSPI_Busy</td><td>The transfer is still in progress. framesTransferred is filled with the number of words that have been transferred so far. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga08ca2ffc48f8a7fe72694571e067b5a1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__dspi__hal.html#ga34b3b8e88f67e380c7e5f50e2422774c">dspi_status_t</a> DSPI_DRV_MasterAbortTransfer </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>instance</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>During an async transfer, the user has the option to terminate the transfer early if the transfer is still in progress.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">instance</td><td>The instance number of the DSPI peripheral.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">kStatus_DSPI_Success</td><td>The transfer was successful. </td></tr>
    <tr><td class="paramname">kStatus_DSPI_NoTransferInProgress</td><td>No transfer is currently in progress. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.5-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul class="foot">
    <li class="footer">Fri Jul 25 2014 &copy; 2014 Freescale Semiconductor, Inc. All rights reserved. 
    </li>
  </ul>
</div>
</body>
</html>
