<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>Kinetis SDK Demo Applications User&#39;s Guide: I2C Communication Demo</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="fs_logo.gif"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Kinetis SDK Demo Applications User&#39;s Guide
   &#160;<span id="projectnumber">1.0.0</span>
   </div>
   <div id="projectbrief">Freescale Semiconductor, Inc.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Demos</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__i2c__comm.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">I2C Communication Demo</div>  </div>
</div><!--header-->
<div class="contents">
<p>This demo application demonstrates the I2C demo.</p>
<h1><a class="anchor" id="Ovw"></a>
Overview</h1>
<p>The I2C communication application demonstrates I2C data communication between two boards. It also features low power wakeup of the slave board by using I2C address matching.<br/>
 First, the I2C slave board enters the low power wait mode. An LED on the I2C slave board is on to indicate that the MCU is in sleep mode and no code is running. <br/>
 Then, the I2C slave board is woken up by the I2C address matching interrupt when the I2C master boards sends the proper address. The LED on the I2C slave board is toggled during the data communication.<br/>
 After power on, the I2C master starts reading data from the I2C slave data buffer. The I2C slave has "sub" addresses to access a specific byte of data on the slave board. The master prints this data out via the serial terminal. The master can then modify the data at a specific "sub" address on the slave board. When the data is received, the I2C slave changes the content at that requested "sub" address. This change is reflected when the master reads the slave data buffer again.<br/>
</p>
<h1><a class="anchor" id="SP"></a>
Supported Platforms</h1>
<p>These Freescale Freedom development platforms and Tower System modules are supported by the KSDK I2C Communication demo.<br/>
</p>
<ul>
<li>FRDM-K22F</li>
<li>FRDM-K64F</li>
<li>TWR-K22F120M</li>
<li>TWR-K64F120M</li>
<li>TWR-KV31F120M</li>
</ul>
<h1><a class="anchor" id="GS"></a>
Getting Started</h1>
<h2><a class="anchor" id="HC"></a>
Hardware configuration</h2>
<p>This demo requires two separate boards. Make these connections between the two boards by using external wires:</p>
<h2>FRDM-K22F:</h2>
<div> <table class="doxtable">
<tr>
<td colspan="2" align="center" bgcolor="#2E9AFE">Master Board </td><td colspan="1" align="center" bgcolor="#2E9AFE">Connects To </td><td colspan="2" align="center" bgcolor="#2E9AFE">Slave Board  </td></tr>
<tr>
<td colspan="1" align="center" bgcolor="#2E9AFE">Pin Name </td><td colspan="1" align="center" bgcolor="#2E9AFE">Board Location </td><td colspan="1" align="center" bgcolor="#2E9AFE"></td><td colspan="1" align="center" bgcolor="#2E9AFE">Pin Name </td><td colspan="1" align="center" bgcolor="#2E9AFE">Board Location  </td></tr>
<tr>
<td align="center">PTB2/I2C0_SCL </td><td align="center">J24 Pin 12 </td><td align="center">-&gt; </td><td align="center">PTB2/I2C0_SCL </td><td align="center">J24 Pin 12  </td></tr>
<tr>
<td align="center">PTB3/I2C0_SDA </td><td align="center">J24 Pin 10 </td><td align="center">-&gt; </td><td align="center">PTB3/I2C0_SDA </td><td align="center">J24 Pin 10  </td></tr>
<tr>
<td align="center">GND </td><td align="center">J2 Pin 14 </td><td align="center">-&gt; </td><td align="center">GND </td><td align="center">J2 Pin 14  </td></tr>
</table>
</div><h2>FRDM-K64F:</h2>
<div> <table class="doxtable">
<tr>
<td colspan="2" align="center" bgcolor="#2E9AFE">Master Board </td><td colspan="1" align="center" bgcolor="#2E9AFE">Connects To </td><td colspan="2" align="center" bgcolor="#2E9AFE">Slave Board  </td></tr>
<tr>
<td colspan="1" align="center" bgcolor="#2E9AFE">Pin Name </td><td colspan="1" align="center" bgcolor="#2E9AFE">Board Location </td><td colspan="1" align="center" bgcolor="#2E9AFE"></td><td colspan="1" align="center" bgcolor="#2E9AFE">Pin Name </td><td colspan="1" align="center" bgcolor="#2E9AFE">Board Location  </td></tr>
<tr>
<td align="center">PTE24/I2C0_SCL </td><td align="center">J2 Pin 20 </td><td align="center">-&gt; </td><td align="center">PTE24/I2C0_SCL </td><td align="center">J2 Pin 20  </td></tr>
<tr>
<td align="center">PTE25/I2C0_SDA </td><td align="center">J2 Pin 18 </td><td align="center">-&gt; </td><td align="center">PTE25/I2C0_SDA </td><td align="center">J2 Pin 18  </td></tr>
<tr>
<td align="center">GND </td><td align="center">J2 Pin 14 </td><td align="center">-&gt; </td><td align="center">GND </td><td align="center">J2 Pin 14  </td></tr>
</table>
</div><h2>TWR-K22F120M &amp; TWR-KV31F120M:</h2>
<div> <table class="doxtable">
<tr>
<td colspan="2" align="center" bgcolor="#2E9AFE">Master Board </td><td colspan="1" align="center" bgcolor="#2E9AFE">Connects To </td><td colspan="2" align="center" bgcolor="#2E9AFE">Slave Board  </td></tr>
<tr>
<td colspan="1" align="center" bgcolor="#2E9AFE">Pin Name </td><td colspan="1" align="center" bgcolor="#2E9AFE">Board Location </td><td colspan="1" align="center" bgcolor="#2E9AFE"></td><td colspan="1" align="center" bgcolor="#2E9AFE">Pin Name </td><td colspan="1" align="center" bgcolor="#2E9AFE">Board Location  </td></tr>
<tr>
<td align="center">PTE24/I2C0_SCL </td><td align="center">Primary Elevator A7 </td><td align="center">-&gt; </td><td align="center">PTE24/I2C0_SCL </td><td align="center">Primary Elevator A7  </td></tr>
<tr>
<td align="center">PTE25/I2C0_SDA </td><td align="center">Primary Elevator A8 </td><td align="center">-&gt; </td><td align="center">PTE25/I2C0_SDA </td><td align="center">Primary Elevator A8  </td></tr>
<tr>
<td align="center">GND </td><td align="center">Primary Elevator A6 </td><td align="center">-&gt; </td><td align="center">GND </td><td align="center">Primary Elevator A6  </td></tr>
</table>
</div><h2>TWR-K64F120M:</h2>
<div> <table class="doxtable">
<tr>
<td colspan="2" align="center" bgcolor="#2E9AFE">Master Board </td><td colspan="1" align="center" bgcolor="#2E9AFE">Connects To </td><td colspan="2" align="center" bgcolor="#2E9AFE">Slave Board  </td></tr>
<tr>
<td colspan="1" align="center" bgcolor="#2E9AFE">Pin Name </td><td colspan="1" align="center" bgcolor="#2E9AFE">Board Location </td><td colspan="1" align="center" bgcolor="#2E9AFE"></td><td colspan="1" align="center" bgcolor="#2E9AFE">Pin Name </td><td colspan="1" align="center" bgcolor="#2E9AFE">Board Location  </td></tr>
<tr>
<td align="center">PTC10/I2C1_SCL </td><td align="center">Primary Elevator A75 </td><td align="center">-&gt; </td><td align="center">PTC10/I2C1_SCL </td><td align="center">Primary Elevator A75  </td></tr>
<tr>
<td align="center">PTC11/I2C1_SDA </td><td align="center">Primary Elevator A60 </td><td align="center">-&gt; </td><td align="center">PTC11/I2C1_SDA </td><td align="center">Primary Elevator A60  </td></tr>
<tr>
<td align="center">GND </td><td align="center">Primary Elevator A65 </td><td align="center">-&gt; </td><td align="center">GND </td><td align="center">Primary Elevator A65  </td></tr>
</table>
</div><h2><a class="anchor" id="TermConf"></a>
Terminal configuration</h2>
<p>Configure the PC host serial console as shown:</p>
<ul>
<li>115200 baud rate</li>
<li>8 data bits</li>
<li>No parity</li>
<li>One stop bit</li>
<li>No flow control</li>
</ul>
<h2><a class="anchor" id="RtD"></a>
Run the demo</h2>
<ol>
<li>
Connect the I2C slave board to the master board using the connections listed above. </li>
<li>
Power on the I2C slave board. </li>
<li>
Download and run the i2c_comm_slave project to the I2C slave board. </li>
<li>
The terminal of the I2C slave board prints out a "====== I2C Slave ======" message. </li>
<li>
Power on the I2C master board. </li>
<li>
Download and run the i2c_comm_mstr project to the I2C master board. </li>
<li>
The terminal of the I2C master board prints out a "====== I2C Master ======" message and the data received from the I2C slave. </li>
<li>
<p class="startli">The I2C slave project creates some "sub" addresses to access a specific byte of data on the slave board. The master reads all these "sub" addresses and prints out the data.<br/>
</p>
<table class="doxtable">
<tr>
<th align="left">Slave Sub Address </th><th align="left">Character  </th></tr>
<tr>
<td align="left">[0]</td><td align="left">I </td></tr>
<tr>
<td align="left">[1]</td><td align="left">2 </td></tr>
<tr>
<td align="left">[2]</td><td align="left">C </td></tr>
<tr>
<td align="left">[3]</td><td align="left">- </td></tr>
<tr>
<td align="left">[4]</td><td align="left">C </td></tr>
<tr>
<td align="left">[5]</td><td align="left">O </td></tr>
<tr>
<td align="left">[6]</td><td align="left">M </td></tr>
<tr>
<td align="left">[7]</td><td align="left">M </td></tr>
</table>
</li>
<li>
To change the I2C slave sub address content, input a new character in the I2C master command line:<br/>
 <div class="fragment"><div class="line">Input <a class="code" href="task__master_8c.html#a34d2fd063e07bfcf1cec98278044769a">slave</a> sub address and the <span class="keyword">new</span> character.</div>
<div class="line">Slave Sub Address: 5</div>
<div class="line">Input New Character: F</div>
</div><!-- fragment -->  </li>
<li>
The master then displays the updated content on the terminal output. <table class="doxtable">
<tr>
<th align="left">Slave Sub Address </th><th align="left">Character  </th></tr>
<tr>
<td align="left">[0]</td><td align="left">I </td></tr>
<tr>
<td align="left">[1]</td><td align="left">2 </td></tr>
<tr>
<td align="left">[2]</td><td align="left">C </td></tr>
<tr>
<td align="left">[3]</td><td align="left">- </td></tr>
<tr>
<td align="left">[4]</td><td align="left">C </td></tr>
<tr>
<td align="left">[5]</td><td align="left">F </td></tr>
<tr>
<td align="left">[6]</td><td align="left">M </td></tr>
<tr>
<td align="left">[7]</td><td align="left">M </td></tr>
</table>
</li>
</ol>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.5-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul class="foot">
    <li class="footer">Sat Jul 26 2014 &copy; 2014 Freescale Semiconductor, Inc. All rights reserved. 
    </li>
  </ul>
</div>
</body>
</html>
